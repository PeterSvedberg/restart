<!--
@license
The MIT License applies unless otherwise noted. See LICENSE.md for details.
Copyright (c) 2015 Peter Svedberg.
-->
<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="layout-state">
  <template>
    <style>
      :host {
        display: none;
      }
    </style>
    
    <iron-media-query query="(min-width: 0px) and (max-width: 600px)" query-matches="{{layout.s}}"></iron-media-query>
    <iron-media-query query="(min-width: 601px) and (max-width: 1280px)" query-matches="{{layout.m}}"></iron-media-query>
    <iron-media-query query="(min-width: 1281px) and (max-width: 1440px)" query-matches="{{layout.l}}"></iron-media-query>
    <iron-media-query query="(min-width: 1441px) and (max-width: 1600px)" query-matches="{{layout.xl}}"></iron-media-query>
    <iron-media-query query="(min-width: 1601px) and (max-width: 1920px)" query-matches="{{layout.xxl}}"></iron-media-query>
    <iron-media-query query="(min-width: 1921px)" query-matches="{{layout.xxxl}}"></iron-media-query>
    
    <iron-media-query query="(min-width: 0px) and (max-width: 360px) and (orientation: portrait)" query-matches="{{layout.smallPortrait}}"></iron-media-query>
    <iron-media-query query="(min-width: 361px) and (max-width: 600px) and (orientation: portrait)" query-matches="{{layout.mediumPortrait}}"></iron-media-query>
    <iron-media-query query="(min-width: 601px) and (max-width: 840px) and (orientation: portrait)" query-matches="{{layout.largePortrait}}"></iron-media-query>
    <iron-media-query query="(min-width: 841px) and (max-width: 1280px) and (orientation: portrait)" query-matches="{{layout.xlPortrait}}"></iron-media-query>
    
    <iron-media-query query="(min-width: 0px) and (max-width: 480px) and (orientation: landscape)" query-matches="{{layout.smallLandscape}}"></iron-media-query>
    <iron-media-query query="(min-width: 481px) and (max-width: 600px) and (orientation: landscape)" query-matches="{{layout.mediumLandscape}}"></iron-media-query>
    <iron-media-query query="(min-width: 601px) and (max-width: 960px) and (orientation: landscape)" query-matches="{{layout.largeLandscape}}"></iron-media-query>
    <iron-media-query query="(min-width: 961px) and (max-width: 1280px) and (orientation: landscape)" query-matches="{{layout.xlLandscape}}"></iron-media-query>

  </template>
  
  <script>
    'use strict';
    
    class Layout {
      
      constructor() {
        this.isOneColumn = false;
        this.isTwoColumn = false;
        this.isThreeColumn = false;

        this.s = false;
        this.m = false;
        this.l = false;
        this.xl = false;
        this.xxl = false;
        this.xxxl = false;
        
        this.smallPortrait = false;
        this.mediumPortrait = false;
        this.largePortrait = false;
        this.xlPortrait = false;
          
        this.smallLandscape = false;
        this.mediumLandscape = false;
        this.largeLandscape = false;
        this.xlLandscape = false;
        
      }      
    }
    
    (function() {
      class LayoutState {
        beforeRegister() {
          this.is = 'layout-state';
          
          this.properties = {
            layout: {
              type: Object,
              notify: true,
              value: new Layout()
            }   
          };
        }
        
        attached() {
          addEventListener('resize', () => {
            this._calcDimensions();
          });
          this._calcDimensions();
        }
        
        _calcDimensions() {
          this.layout.isOneColumn = this.layout.s || this.layout.smallPortrait || this.layout.mediumPortrait || this.layout.smallLandscape || this.layout.mediumLandscape;
          this.layout.isTwoColumn = this.layout.m || this.layout.l || this.layout.largePortrait || this.layout.xlPortrait || this.layout.largeLandscape || this.layout.xlLandscape;
          this.layout.isThreeColumn = this.layout.xl || this.layout.xxl || this.layout.xxxl;
        }
        
        toString() {
          console.log('isOneColumn:' + this.layout.isOneColumn); 
          console.log('isTwoColumn:' + this.layout.isTwoColumn); 
          console.log('isThreeColumn:' + this.layout.isThreeColumn); 
          
          console.log('s:' + this.layout.s); 
          console.log('m:' + this.layout.m); 
          console.log('l:' + this.layout.l); 
          console.log('xl:' + this.layout.xl);
          console.log('xxl:' + this.layout.xxl);
          console.log('xxxl:' + this.layout.xxxl);
          
          console.log('smallPortrait:' + this.layout.smallPortrait);
          console.log('mediumPortrait:' + this.layout.mediumPortrait);
          console.log('largePortrait:' + this.layout.largePortrait);
          console.log('xlPortrait:' + this.layout.xlPortrait);
          
          console.log('smallLandscape:' + this.layout.smallLandscape);
          console.log('mediumLandscape:' + this.layout.mediumLandscape);
          console.log('largeLandscape:' + this.layout.largeLandscape);
          console.log('xlLandscape:' + this.layout.xlLandscape);
        }
        
      }
      
      new Polymer(LayoutState);
        
    })();

  </script>
</dom-module>
